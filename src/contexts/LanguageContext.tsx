import { createContext, useContext, useState, ReactNode } from 'react';

export type Language = 'fr' | 'en' | 'es' | 'de';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
  fr: {
    'preheader.trial': 'ğŸ‰ Essai gratuit 7 jours â€” Aucune CB requise â€” Garantie temps-gagnÃ© 30j',
    'signup.title': 'Commencer avec NutriZen',
    'signup.subtitle': 'Choisis ta formule pour crÃ©er ton compte',
    'signup.info': 'Pour garantir la qualitÃ© de notre service, la crÃ©ation de compte se fait uniquement via Stripe.',
    'signup.benefit': 'ğŸ 7 jours d\'essai gratuit Â· Aucune carte bancaire requise',
    'signup.viewPlans': 'Voir les formules',
    'signup.hasAccount': 'DÃ©jÃ  un compte ?',
    'signup.login': 'Se connecter',
    'signup.backHome': 'â† Retour Ã  l\'accueil',
    'header.advantages': 'Avantages',
    'header.howItWorks': 'Fonctionnement',
    'header.examples': 'Exemples',
    'header.pricing': 'Tarifs',
    'header.faq': 'FAQ',
    'header.blog': 'Blog',
    'header.login': 'Se connecter',
    'header.cta': 'Commencer gratuitement',
    'hero.badge': 'ğŸ”¥ +1 000 utilisateurs',
    'hero.badgeSuffix': 'Â· 92% prolongent aprÃ¨s essai',
    'hero.title': 'Menus adaptÃ©s Ã  tes objectifs en 30 secondes',
    'hero.subtitle': 'Sans passer des heures Ã  rÃ©flÃ©chir, planifier et calculer.',
    'hero.benefit1': 'Gagne 5h par semaine',
    'hero.benefit1Desc': 'sur ta planification repas',
    'hero.benefit2': 'Ton plan adaptÃ©',
    'hero.benefit2Desc': 'Ã  tes objectifs (perte, maintien, prise)',
    'hero.benefit3': 'Plus de prise de tÃªte',
    'hero.benefit3Desc': ': tout est calculÃ© pour toi',
    'hero.cta': 'Commencer mon essai gratuit 7 jours',
    'hero.trial': 'Essai gratuit 7 jours',
    'hero.trialDetails': 'Â· Aucun engagement Â· Aucune carte bancaire requise',
    'hero.rating': '4,8/5',
    'hero.reviews': '+2 400 avis',
    'hero.cancelAnytime': 'Annulable en 3 clics',
    'hero.guarantee': 'Garantie temps-gagnÃ© 30j',
    'hero.validated': 'ValidÃ© par diÃ©tÃ©ticien(ne)',
    'hero.menuGenerated': 'Menu gÃ©nÃ©rÃ©',
    'hero.autoShoppingList': 'Courses auto',
    'benefits.title': 'Pourquoi choisir myNutriZen ?',
    'benefits.1.title': 'Gagne 5h par semaine',
    'benefits.1.result': 'Plus de temps pour toi',
    'benefits.1.description': 'Fini les 30 min quotidiennes Ã  te demander "qu\'est-ce qu\'on mange ?". Tout est planifiÃ© automatiquement.',
    'benefits.2.title': 'Ã‰conomise jusqu\'Ã  30%',
    'benefits.2.result': 'Liste de courses optimisÃ©e',
    'benefits.2.description': 'Ton plan gÃ©nÃ¨re une liste prÃ©cise par rayon. Exit les achats impulsifs et le gaspillage.',
    'benefits.3.title': 'ZÃ©ro charge mentale',
    'benefits.3.result': 'Menus Ã©quilibrÃ©s automatiques',
    'benefits.3.description': 'Ton plan adaptÃ© Ã  tes objectifs (perte, maintien, prise). Tout est calculÃ© et prÃªt en 1 clic.',
    'howItWorks.title': 'Comment Ã§a marche ?',
    'howItWorks.subtitle': '3 Ã©tapes simples pour simplifier tes repas',
    'howItWorks.step1.title': 'RÃ©ponds Ã  3 questions en 60 s',
    'howItWorks.step1.description': 'Profils, goÃ»ts, objectifs â€” on crÃ©e ton plan.',
    'howItWorks.step2.title': 'ReÃ§ois ton plan repas gÃ©nÃ©rÃ© automatiquement',
    'howItWorks.step2.description': 'Chaque jour un menu complet adaptÃ© Ã  ton rythme.',
    'howItWorks.step3.title': 'Swap libre & profite',
    'howItWorks.step3.description': 'Un plat ne te plaÃ®t pas ? Change-le en un clic. Gain de temps. ZÃ©ro stress.',
  },
  en: {
    'preheader.trial': 'ğŸ‰ 7-day free trial â€” No credit card required â€” 30-day time-saved guarantee',
    'signup.title': 'Get Started with NutriZen',
    'signup.subtitle': 'Choose your plan to create your account',
    'signup.info': 'To ensure the quality of our service, account creation is done exclusively via Stripe.',
    'signup.benefit': 'ğŸ 7-day free trial Â· No credit card required',
    'signup.viewPlans': 'View Plans',
    'signup.hasAccount': 'Already have an account?',
    'signup.login': 'Sign in',
    'signup.backHome': 'â† Back to home',
    'header.advantages': 'Benefits',
    'header.howItWorks': 'How It Works',
    'header.examples': 'Examples',
    'header.pricing': 'Pricing',
    'header.faq': 'FAQ',
    'header.blog': 'Blog',
    'header.login': 'Sign in',
    'header.cta': 'Get Started Free',
    'hero.badge': 'ğŸ”¥ +1,000 users',
    'hero.badgeSuffix': 'Â· 92% continue after trial',
    'hero.title': 'Menus tailored to your goals in 30 seconds',
    'hero.subtitle': 'Without spending hours thinking, planning, and calculating.',
    'hero.benefit1': 'Save 5h per week',
    'hero.benefit1Desc': 'on your meal planning',
    'hero.benefit2': 'Your personalized plan',
    'hero.benefit2Desc': 'for your goals (loss, maintenance, gain)',
    'hero.benefit3': 'No more hassle',
    'hero.benefit3Desc': ': everything calculated for you',
    'hero.cta': 'Start my 7-day free trial',
    'hero.trial': '7-day free trial',
    'hero.trialDetails': 'Â· No commitment Â· No credit card required',
    'hero.rating': '4.8/5',
    'hero.reviews': '+2,400 reviews',
    'hero.cancelAnytime': 'Cancel anytime in 3 clicks',
    'hero.guarantee': '30-day time-saved guarantee',
    'hero.validated': 'Dietitian validated',
    'hero.menuGenerated': 'Menu generated',
    'hero.autoShoppingList': 'Auto shopping list',
    'benefits.title': 'Why choose myNutriZen?',
    'benefits.1.title': 'Save 5h per week',
    'benefits.1.result': 'More time for you',
    'benefits.1.description': 'No more 30 daily minutes wondering "what to eat?". Everything is planned automatically.',
    'benefits.2.title': 'Save up to 30%',
    'benefits.2.result': 'Optimized shopping list',
    'benefits.2.description': 'Your plan generates a precise list by aisle. No more impulse purchases and waste.',
    'benefits.3.title': 'Zero mental load',
    'benefits.3.result': 'Automatic balanced menus',
    'benefits.3.description': 'Your plan adapted to your goals (loss, maintenance, gain). Everything calculated and ready in 1 click.',
    'howItWorks.title': 'How does it work?',
    'howItWorks.subtitle': '3 simple steps to simplify your meals',
    'howItWorks.step1.title': 'Answer 3 questions in 60s',
    'howItWorks.step1.description': 'Profiles, tastes, goals â€” we create your plan.',
    'howItWorks.step2.title': 'Receive your automatically generated meal plan',
    'howItWorks.step2.description': 'Every day a complete menu adapted to your rhythm.',
    'howItWorks.step3.title': 'Free swap & enjoy',
    'howItWorks.step3.description': 'Don\'t like a dish? Change it in one click. Time saved. Zero stress.',
  },
  es: {
    'preheader.trial': 'ğŸ‰ Prueba gratuita de 7 dÃ­as â€” Sin tarjeta de crÃ©dito â€” GarantÃ­a de tiempo ahorrado de 30 dÃ­as',
    'signup.title': 'Comienza con NutriZen',
    'signup.subtitle': 'Elige tu plan para crear tu cuenta',
    'signup.info': 'Para garantizar la calidad de nuestro servicio, la creaciÃ³n de cuentas se realiza exclusivamente a travÃ©s de Stripe.',
    'signup.benefit': 'ğŸ Prueba gratuita de 7 dÃ­as Â· Sin tarjeta de crÃ©dito requerida',
    'signup.viewPlans': 'Ver Planes',
    'signup.hasAccount': 'Â¿Ya tienes una cuenta?',
    'signup.login': 'Iniciar sesiÃ³n',
    'signup.backHome': 'â† Volver al inicio',
    'header.advantages': 'Ventajas',
    'header.howItWorks': 'CÃ³mo Funciona',
    'header.examples': 'Ejemplos',
    'header.pricing': 'Precios',
    'header.faq': 'FAQ',
    'header.blog': 'Blog',
    'header.login': 'Iniciar sesiÃ³n',
    'header.cta': 'Comenzar Gratis',
    'hero.badge': 'ğŸ”¥ +1.000 usuarios',
    'hero.badgeSuffix': 'Â· 92% continÃºan despuÃ©s de la prueba',
    'hero.title': 'MenÃºs adaptados a tus objetivos en 30 segundos',
    'hero.subtitle': 'Sin pasar horas pensando, planificando y calculando.',
    'hero.benefit1': 'Ahorra 5h por semana',
    'hero.benefit1Desc': 'en tu planificaciÃ³n de comidas',
    'hero.benefit2': 'Tu plan personalizado',
    'hero.benefit2Desc': 'para tus objetivos (pÃ©rdida, mantenimiento, ganancia)',
    'hero.benefit3': 'Sin complicaciones',
    'hero.benefit3Desc': ': todo calculado para ti',
    'hero.cta': 'Comenzar mi prueba gratuita de 7 dÃ­as',
    'hero.trial': 'Prueba gratuita de 7 dÃ­as',
    'hero.trialDetails': 'Â· Sin compromiso Â· Sin tarjeta de crÃ©dito requerida',
    'hero.rating': '4,8/5',
    'hero.reviews': '+2.400 reseÃ±as',
    'hero.cancelAnytime': 'Cancela en cualquier momento en 3 clics',
    'hero.guarantee': 'GarantÃ­a de tiempo ahorrado de 30 dÃ­as',
    'hero.validated': 'Validado por nutricionista',
    'hero.menuGenerated': 'MenÃº generado',
    'hero.autoShoppingList': 'Lista de compras automÃ¡tica',
    'benefits.title': 'Â¿Por quÃ© elegir myNutriZen?',
    'benefits.1.title': 'Ahorra 5h por semana',
    'benefits.1.result': 'MÃ¡s tiempo para ti',
    'benefits.1.description': 'Se acabaron los 30 minutos diarios preguntÃ¡ndote "Â¿quÃ© comemos?". Todo estÃ¡ planificado automÃ¡ticamente.',
    'benefits.2.title': 'Ahorra hasta un 30%',
    'benefits.2.result': 'Lista de compras optimizada',
    'benefits.2.description': 'Tu plan genera una lista precisa por pasillo. AdiÃ³s a las compras impulsivas y el desperdicio.',
    'benefits.3.title': 'Cero carga mental',
    'benefits.3.result': 'MenÃºs equilibrados automÃ¡ticos',
    'benefits.3.description': 'Tu plan adaptado a tus objetivos (pÃ©rdida, mantenimiento, ganancia). Todo calculado y listo en 1 clic.',
    'howItWorks.title': 'Â¿CÃ³mo funciona?',
    'howItWorks.subtitle': '3 pasos simples para simplificar tus comidas',
    'howItWorks.step1.title': 'Responde 3 preguntas en 60s',
    'howItWorks.step1.description': 'Perfiles, gustos, objetivos: creamos tu plan.',
    'howItWorks.step2.title': 'Recibe tu plan de comidas generado automÃ¡ticamente',
    'howItWorks.step2.description': 'Cada dÃ­a un menÃº completo adaptado a tu ritmo.',
    'howItWorks.step3.title': 'Intercambio libre y disfruta',
    'howItWorks.step3.description': 'Â¿No te gusta un plato? CÃ¡mbialo en un clic. Ahorro de tiempo. Cero estrÃ©s.',
  },
  de: {
    'preheader.trial': 'ğŸ‰ 7 Tage kostenlose Testversion â€” Keine Kreditkarte erforderlich â€” 30-Tage-Zeitersparnis-Garantie',
    'signup.title': 'Starte mit NutriZen',
    'signup.subtitle': 'WÃ¤hle deinen Plan, um dein Konto zu erstellen',
    'signup.info': 'Um die QualitÃ¤t unseres Services zu gewÃ¤hrleisten, erfolgt die Kontoerstellung ausschlieÃŸlich Ã¼ber Stripe.',
    'signup.benefit': 'ğŸ 7 Tage kostenlose Testversion Â· Keine Kreditkarte erforderlich',
    'signup.viewPlans': 'PlÃ¤ne ansehen',
    'signup.hasAccount': 'Hast du bereits ein Konto?',
    'signup.login': 'Anmelden',
    'signup.backHome': 'â† ZurÃ¼ck zur Startseite',
    'header.advantages': 'Vorteile',
    'header.howItWorks': 'Wie es funktioniert',
    'header.examples': 'Beispiele',
    'header.pricing': 'Preise',
    'header.faq': 'FAQ',
    'header.blog': 'Blog',
    'header.login': 'Anmelden',
    'header.cta': 'Kostenlos starten',
    'hero.badge': 'ğŸ”¥ +1.000 Nutzer',
    'hero.badgeSuffix': 'Â· 92% verlÃ¤ngern nach der Testphase',
    'hero.title': 'MenÃ¼s an deine Ziele angepasst in 30 Sekunden',
    'hero.subtitle': 'Ohne Stunden mit Nachdenken, Planen und Berechnen zu verbringen.',
    'hero.benefit1': 'Spare 5h pro Woche',
    'hero.benefit1Desc': 'bei deiner Essensplanung',
    'hero.benefit2': 'Dein personalisierter Plan',
    'hero.benefit2Desc': 'fÃ¼r deine Ziele (Abnehmen, Erhaltung, Zunehmen)',
    'hero.benefit3': 'Kein Stress mehr',
    'hero.benefit3Desc': ': alles fÃ¼r dich berechnet',
    'hero.cta': 'Meine 7-tÃ¤gige kostenlose Testversion starten',
    'hero.trial': '7 Tage kostenlose Testversion',
    'hero.trialDetails': 'Â· Keine Verpflichtung Â· Keine Kreditkarte erforderlich',
    'hero.rating': '4,8/5',
    'hero.reviews': '+2.400 Bewertungen',
    'hero.cancelAnytime': 'Jederzeit in 3 Klicks kÃ¼ndbar',
    'hero.guarantee': '30-Tage-Zeitersparnis-Garantie',
    'hero.validated': 'Von ErnÃ¤hrungsberater validiert',
    'hero.menuGenerated': 'MenÃ¼ generiert',
    'hero.autoShoppingList': 'Auto-Einkaufsliste',
    'benefits.title': 'Warum myNutriZen wÃ¤hlen?',
    'benefits.1.title': 'Spare 5h pro Woche',
    'benefits.1.result': 'Mehr Zeit fÃ¼r dich',
    'benefits.1.description': 'Keine 30 Minuten tÃ¤glich mehr mit der Frage "Was essen wir?". Alles ist automatisch geplant.',
    'benefits.2.title': 'Spare bis zu 30%',
    'benefits.2.result': 'Optimierte Einkaufsliste',
    'benefits.2.description': 'Dein Plan erstellt eine prÃ¤zise Liste nach Gang. Keine ImpulskÃ¤ufe und Verschwendung mehr.',
    'benefits.3.title': 'Null mentale Belastung',
    'benefits.3.result': 'Automatische ausgewogene MenÃ¼s',
    'benefits.3.description': 'Dein Plan angepasst an deine Ziele (Abnehmen, Erhaltung, Zunehmen). Alles berechnet und bereit in 1 Klick.',
    'howItWorks.title': 'Wie funktioniert es?',
    'howItWorks.subtitle': '3 einfache Schritte zur Vereinfachung deiner Mahlzeiten',
    'howItWorks.step1.title': 'Beantworte 3 Fragen in 60s',
    'howItWorks.step1.description': 'Profile, GeschmÃ¤cker, Ziele â€” wir erstellen deinen Plan.',
    'howItWorks.step2.title': 'Erhalte deinen automatisch generierten Essensplan',
    'howItWorks.step2.description': 'Jeden Tag ein komplettes MenÃ¼ an deinen Rhythmus angepasst.',
    'howItWorks.step3.title': 'Freier Tausch & genieÃŸe',
    'howItWorks.step3.description': 'Magst du ein Gericht nicht? Ã„ndere es mit einem Klick. Zeitersparnis. Null Stress.',
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguage] = useState<Language>(() => {
    const stored = localStorage.getItem('nutrizen-language') as Language;
    return stored || 'fr';
  });

  const handleSetLanguage = (lang: Language) => {
    setLanguage(lang);
    localStorage.setItem('nutrizen-language', lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage: handleSetLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (!context) throw new Error('useLanguage must be used within LanguageProvider');
  return context;
}
